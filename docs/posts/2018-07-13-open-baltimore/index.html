<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Eli Pousson">
<meta name="dcterms.date" content="2018-07-13">

<title>Eli Pousson - Baltimore Data Day: How are people using data on Open Baltimore?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../files/favicon-512x512.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Eli Pousson - Baltimore Data Day: How are people using data on Open Baltimore?">
<meta name="twitter:description" content="A presentation for Baltimore Data Day 2018.">
<meta name="twitter:image" content="https://elipousson.github.io/posts/2018-07-13-open-baltimore/images/1s12943u-hotel-rennert-1896.jpg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Eli Pousson</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/elipousson" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://dads.cool/@elipousson" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/elipousson" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Baltimore Data Day: How are people using data on Open Baltimore?</h1>
            <p class="subtitle lead">A presentation for Baltimore Data Day 2018.</p>
                                <div class="quarto-categories">
                <div class="quarto-category">presentation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://elipousson.github.io">Eli Pousson</a> <a href="https://orcid.org/0000-0001-8280-1706" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 13, 2018</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>I had the opportunity to participate in Baltimore Data Day again this year as part of a panel discussion on Open Baltimore, the city’s seven-year-old open data portal. The narrative notes from my presentation are below and should (mostly) match up with <a href="https://docs.google.com/presentation/d/18acVed8lYoFREfHrJ7SZKwD4onk4gYYeRXgIhyjo0xI/edit?usp=sharing">my Google Slides</a>.</p>
<p>The presentation is based in part on my rough analysis of the Open Baltimore public asset inventory including a look at just the <a href="https://docs.google.com/spreadsheets/d/1lyEHlaM-9hPfp38h8K_IMuK7kG9OD9_T9wfTuwXkAZ8/edit?usp=sharing">community or custom views of data</a> created by registered Open Baltimore users and the <a href="https://docs.google.com/spreadsheets/d/1URIuecV0SMCQN0NAkzZjH6O89qaZ4c3JL6yNh5aj7nk/edit?usp=sharing">official datasets</a> (excluding derived views like maps or visualization). I used a <a href="https://twitter.com/search?f=tweets&amp;vertical=default&amp;q=%40OpenBaltimore&amp;src=typd">Twitter search for mentions of @OpenBaltimore</a> to collect examples of past reactions and complaints. And, I also <a href="https://twitter.com/elipousson/status/1014888840388104192">shared my initial findings on Twitter</a> while soliciting feedback from local residents who have used Open Baltimore. I combined this recent history with a closer look at the history of GIS that I compiled into a <a href="https://cdn.knightlab.com/libs/timeline3/latest/embed/index.html?source=1pflqm9xKafOmsGlSVyL4ORdr1A65v0EnTTChMid8TQM&amp;font=Default&amp;lang=en&amp;initial_zoom=2&amp;height=650">rough timeline</a> (also available in an <a href="https://docs.google.com/spreadsheets/d/1pflqm9xKafOmsGlSVyL4ORdr1A65v0EnTTChMid8TQM/edit#gid=0">open Google Sheet</a>).</p>
<hr>
<p>I’m here today because I’m a data nerd and Baltimore City resident who is equally enthusiastic about using, praising, and criticizing Open Baltimore. Like many others, I’m frustrated by all the ways in which Open Baltimore doesn’t work. And I’ll be talking about those frustrations today. But I also want to start by urging everyone to see fixing these problems as a shared responsibility. By listening to one another’s experiences, I think we can make Open Baltimore better and make Baltimore better at the same time.</p>
<p>So let’s start with a look at the recent history of people using Open Baltimore.</p>
<p>The first data set uploaded to Open Baltimore—a GIS shapefile of building footprints—was added on January 21, 2011. Northeast Baltimore resident Rob Walshe created the first custom view on Open Baltimore just five days later when he created a list of 311 service requests for graffiti removal in the neighborhoods of Hamilton and Gardenville.</p>
<p>Over seven years have passed and eight hundred people have created accounts on Open Baltimore to create their own custom views of the city’s open data. This group of users include residents in Medfield, Oliver, Violetville, Homeland, and Howard Park. Some use Open Baltimore to learn about their neighborhoods. Others use the data in their work as journalists, educators, organizers, and researchers. While most people only ever create a single custom view, some create multiple views—often on behalf of a community group.</p>
<p>You can judge the popularity of Open Baltimore data sets by page views or downloads but I am more interested in the people who are trying to <em>do something</em> with the data beyond just looking at it. So today, we are looking at these users and the data they’re using including:</p>
<ul>
<li>victim-based crimes</li>
<li>311 customer service requests</li>
<li>vacant building notices</li>
<li>arrests</li>
<li>and 911 calls</li>
</ul>
<p>Together, people have created nearly fourteen hundred custom views based on just these five data sets—totalling over seventy percent of the custom views created on Open Baltimore since 2011.</p>
<p>But, despite their consistent interest in using the data published on Open Baltimore, resident experiences with the service are a mix of education, empowerment, and aggravation.</p>
<p>One Howard Park resident, John Schladen, started using Open Baltimore in November 2012 and started working with his neighbors to document vacant buildings in their neighborhood. In a <a href="http://darkroom.baltimoresun.com/2015/03/howard-park-exploring-baltimores-neighborhoods/#1">March 2015 interview</a> with the <em>Baltimore Sun</em>, John noted the importance of data on housing for residents in Howard Park:</p>
<blockquote class="blockquote">
<p>“If we can begin to understand our own condition as a community, we’re going to have much more power.”</p>
</blockquote>
<p>Between January 2014 and November 2015, Samantha Armacost created twenty-five custom views on Open Baltimore on behalf of the Medfield Community Assoication. But, in 2015, she grew frustrated after changes in the availability of victim-based crime data undermined her efforts make sense of public safety in her community. She no longer uses the site.</p>
<p>Unpredictable coverage wasn’t the only concern for residents or researchers. In an <a href="https://www.urban.org/sites/default/files/publication/22921/413219-Partner-s-Perspective-NNIP-and-Open-Data-in-Baltimore.PDF">August 2014 report</a> Eric Burnstein and Seema Iyer, noted the difficulty of using the “rounded address” (the unit block number and street name) to assign incidents to neighborhoods. As a result, the 2014 publication of BNIA-JFI’s annual “Vital Signs” report “excluded many crime indicators for the first time since its inception.”</p>
<p>Journalist Danielle Sweeney started using Open Baltimore in August 2015 as part of her reporting for the Baltimore Brew on <a href="https://baltimorebrew.com/2015/08/26/a-burglar-in-your-bedroom-a-mugger-with-a-gun/">police responses to property crime</a>. By April 2017, when she turned to Twitter in frustration, writing: “No one ever answers my questions.” Fortunately, Danielle was not disuaded and actually expanded her use of the site in 2017 and 2018.</p>
<p>While Open Baltimore may not be responsible for the errors and inconsistency in the data provided by city agencies, poor communication does little to correct any misconceptions. User comments on <a href="https://data.baltimorecity.gov/Public-Safety/911-Police-Calls-for-Service/xviu-ezkt/data">911 call data point</a> out missing and incorrect information without any offiial reponse.</p>
<p>The footer of Open Baltimore encourages people to <a href="https://data.baltimorecity.gov/nominate">“nominate a dataset”</a> but the published comments highlight the confusion experienced by many individuals using the site. People are looking for data sets that are <a href="https://data.baltimorecity.gov/nominate/6302">already available</a> and wondering what happened to data that has <a href="https://data.baltimorecity.gov/nominate/6609">disappeared from public view</a>. People report issues with incorrect or <a href="https://data.baltimorecity.gov/nominate/3458">missing data</a>. Few comments of any kind have been published lately. No “dataset suggestions” have been marked as “approved” since February 18, 2014. Users submitted 148 suggestions over the first five years of Open Baltimore’s operation. Over the last two and a half years, only twenty-one suggestions have been submitted. Given the lack of response to prior submissions, people could be forgiven for deciding that trying to request new data on Open Baltimore may not be worth the trouble.</p>
<p>Of course, Open Baltimore isn’t the only source for data and public information from city agencies. And these other sources have their own challenges: confusing interfaces, inaccessible web design, and dated technical infrastructure. You don’t need take my word for it. Please try finding data and information on a few of these sites:</p>
<ul>
<li>Baltimore City Health Department <a href="http://baltimore.foodinspectionreports.com">Food Facility Inspection Reports database</a></li>
<li>The Department of Planning’s <a href="https://planning.baltimorecity.gov/maps-data/online-community-association-directory">Community Association Directory</a></li>
<li>The <a href="https://bllcrecords.baltimorecity.gov">database of applications, inspection reports, and other documents</a> from the Board of Liquor License Commissioners for Baltimore City</li>
<li>Baltimore Housing’s <a href="http://cels.baltimorehousing.org/codemap/codeMap.html">codeMap</a></li>
</ul>
<p>Can you find the information you need using these sites? Do you feel like the information is accurate and up to date? If not, why not? <!-- Add a mention for Councilman Brandon Scott's role in getting the health department and 911 data up online. --></p>
<p>All to often, residents searching for essential public information run into frustrating and disappointing road blocks. <a href="http://openbudget.baltimorecity.gov/">Open Budget Baltimore</a> created by the Bureau of the Budget and Management Research is just one revealing example of this problem. The site tells visitors that the “data that powers Open Budget” is “available to you.” But my recent attempt to follow the link data led back to Open Baltimore where I was confronted by a message tell me to go “Back to where you came from.” Is this what it feels like to have your own city gas-lighting you?</p>
<p>I truly don’t want to spend our time together on a re-visiting past complaints. Instead, I’d like to find a way to bridge the gap between the aspirations and dreams we’ve brought to Open Baltimore and the experiences it offers for people in Baltimore today.</p>
<p>For people who believe in the power of data to make the city a better place, you should remember that you are part of a long tradition.</p>
<p>In February 1907, Theodore Marburg, founder and president of the Municipal Art Society, gathered “City and State officials, heads of city departments, City Councilmen and leaders of the thought of a great university” for a “round table” and “smoker” in the Hotel Rennert (where the Charles Center parking lot stands today) to listen to “expositions of the advantages and benefits to be derived” from the city’s new Legislative Reference Department headed by Dr.&nbsp;Horace E. Flack. Before a group of twenty-five White men who sat around a table sipping cups of punch and smoking “fragrant cigars” in the hotel’s “cafe clubroom,” Marburg proclaimed:</p>
<blockquote class="blockquote">
<p>“In this hour of change, the most thorough investigation into a city problem made today may be out of date tomorrow. The price of intelligent action is constant investigation. …The money value of adequate data on things we are about to do is difficult to measure.”</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/1s12943u-hotel-rennert-1896.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Hotel Rennert, c.&nbsp;1896. Published by Alfred S. Campbell. Courtesy <a href="http://www.loc.gov/pictures/item/2005680842/">Library of Congress</a>.</figcaption>
</figure>
</div>
<p>The costs of ignorance may be difficult to measure but we’ve lived with them for as long as Baltimore has been around. For people who are frustrated with the state of open data in Baltimore today, you are also part of a long tradition.</p>
<p>It shouldn’t be a surprise to learn that the Citizen’s Planning and Housing Association (CPHA), for example, has created one hundred and fifty custom views on Open Baltimore—more than any other single user. CPHA has a long history of advocating for city staff and elected officials to improve the ways they organize and share data about housing, transportation, and countless other issues. In one 1965 editorial that sounds all too familiar, the organization observed:</p>
<blockquote class="blockquote">
<p>“No one person knows how many vacant houses are owned by the city, how many should be razed, how many have a known owner, how many are needed for other uses and how many are involved in some stage of the law enforcement process.”</p>
</blockquote>
<p>CPHA’s advocacy led to the creation of the Department of Housing and Community Development in 1968 and, by the mid-1970s, the creation of the city’s first “Vacant House File”—a collection of punch cards created for use with a mainframe computer. Today, using <a href="http://cels.baltimorehousing.org/codemap/codeMap.html">codeMap</a>, anyone can find answers to at least some of these questions.</p>
<p>What can we take away from this recent history and the much longer history that preceded it? Here are a few ideas for what the staff reponsible for Open Baltimore and everyone who plays a part in opening access to public data online could consider:</p>
<ul>
<li>The limits or quirks of Socrata may be one source of the problems with Open Baltimore. But don’t fool yourself into thinking that it is the only part or even the most important part.</li>
<li>Consistent location data is key to ensuring inter-operability and ease of reuse by residents and researchers alike.</li>
<li>Open Baltimore and all of the city’s online services need to put a higher priority on accessibility and education.</li>
<li>Open Baltimore needs meaningful and useful opportunities for feedback that can be used by both city staff and residents.</li>
</ul>



<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div id="quarto-reuse" class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a></div></div></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{pousson2018,
  author = {Pousson, Eli},
  title = {Baltimore {Data} {Day:} {How} Are People Using Data on {Open}
    {Baltimore?}},
  date = {2018-07-13},
  url = {https://elipousson.github.io/posts/2018-07-13-open-baltimore},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-pousson2018" class="csl-entry quarto-appendix-citeas" role="listitem">
Pousson, Eli. 2018. <span>“Baltimore Data Day: How Are People Using Data
on Open Baltimore?”</span> July 13, 2018. <a href="https://elipousson.github.io/posts/2018-07-13-open-baltimore">https://elipousson.github.io/posts/2018-07-13-open-baltimore</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>